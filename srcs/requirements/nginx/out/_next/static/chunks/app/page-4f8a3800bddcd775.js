(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2752:(e,t,s)=>{Promise.resolve().then(s.bind(s,4235))},4235:(e,t,s)=>{"use strict";s.d(t,{default:()=>k});var r=s(5155),a=s(2115),l=s(4624),n=s(2085),c=s(2596),i=s(9688);let o=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef((e,t)=>{let{className:s,variant:a,size:n,asChild:d=!1,...h}=e,x=d?l.DX:"button";return(0,r.jsx)(x,{className:function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,i.QP)((0,c.$)(t))}(o({variant:a,size:n,className:s})),ref:t,...h})});d.displayName="Button";var h=s(760),x=s(8274),u=s(5690),m=s(2178),g=s(227),f=s(2152),p=s(4026),b=s.n(p),v=s(6766);let y={I:{shape:[[1,1,1,1]],color:"cyan-500"},J:{shape:[[1,0,0],[1,1,1]],color:"blue-500"},L:{shape:[[0,0,1],[1,1,1]],color:"orange-500"},O:{shape:[[1,1],[1,1]],color:"yellow-500"},S:{shape:[[0,1,1],[1,1,0]],color:"green-500"},T:{shape:[[0,1,0],[1,1,1]],color:"purple-500"},Z:{shape:[[1,1,0],[0,1,1]],color:"red-500"}},j=()=>Array.from({length:22},()=>Array(10).fill(0)),N=()=>{let e=Object.keys(y);return y[e[Math.floor(Math.random()*e.length)]]},w=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3;return Array.from({length:e},()=>N())};function k(){let[e,t]=(0,a.useState)(j()),[s,l]=(0,a.useState)(null),[n,c]=(0,a.useState)(w()),[i,o]=(0,a.useState)(null),[p,y]=(0,a.useState)(!0),[k,C]=(0,a.useState)(0),[A,S]=(0,a.useState)(0),[E,P]=(0,a.useState)(0),[_,M]=(0,a.useState)(!1),[L,z]=(0,a.useState)(!1),[H,O]=(0,a.useState)(800),[R,T]=(0,a.useState)(1),[D,I]=(0,a.useState)(!0),[F,U]=(0,a.useState)([]),V=(0,a.useRef)(null),B=(0,a.useRef)({board:e,currentPiece:s,gameOver:_,isPaused:L});(0,a.useEffect)(()=>{B.current={board:e,currentPiece:s,gameOver:_,isPaused:L}},[e,s,_,L]);let G=(0,a.useCallback)(function(t,s,r){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e;for(let e=0;e<r.length;e++)for(let l=0;l<r[e].length;l++)if(0!==r[e][l]){let r=t+l,n=s+e;if(r<0||r>=10||n>=22||n>=0&&0!==a[n][r])return!0}return!1},[e]),J=(0,a.useCallback)(function(t,s,r){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e;return!G(t,s,r,a)},[G]),K=(0,a.useCallback)(e=>{for(let t=0;t<10;t++)if(0!==e[2][t])return!0;return!1},[]),Q=(0,a.useCallback)(()=>{if(p&&s){if(i){let e={x:Math.floor(5)-1,y:0,tetromino:i};if(!J(e.x,e.y,e.tetromino.shape)){M(!0);return}o(s.tetromino),l(e)}else o(s.tetromino),es();y(!1)}},[s,i,p,J]),X=(0,a.useCallback)(()=>{s&&!L&&J(s.x-1,s.y,s.tetromino.shape)&&l(e=>({...e,x:e.x-1}))},[s,L,J]),Z=(0,a.useCallback)(()=>{s&&!L&&J(s.x+1,s.y,s.tetromino.shape)&&l(e=>({...e,x:e.x+1}))},[s,L,J]),$=(0,a.useCallback)(()=>{s&&!L&&(J(s.x,s.y+1,s.tetromino.shape)?l(e=>({...e,y:e.y+1})):ee())},[s,L,J]),q=(0,a.useCallback)(()=>{if(!s||L)return;let e=s.tetromino.shape[0].map((e,t)=>s.tetromino.shape.map(e=>e[t]).reverse()),t=s.x,r=s.y;for(let[s,a]of[[0,0],[-1,0],[1,0],[0,-1],[-1,-1],[1,-1]]){let n=t+s,c=r+a;if(J(n,c,e)){l(t=>({...t,x:n,y:c,tetromino:{...t.tetromino,shape:e}}));return}}},[s,L,J]),W=(0,a.useCallback)(()=>{if(!s||L)return;let e=s.y;for(;J(s.x,e+1,s.tetromino.shape);)e++;J(s.x,e,s.tetromino.shape)&&Y({...s,y:e})},[s,L,J]),Y=(0,a.useCallback)(s=>{let r=e.map(e=>[...e]),a=!0;if(s.tetromino.shape.forEach((e,t)=>{e.forEach((e,l)=>{if(0!==e){let e=t+s.y,n=l+s.x;e>=0&&e<22&&n>=0&&n<10&&0===r[e][n]?r[e][n]=s.tetromino.color:a=!1}})}),a){if(t(r),l(null),K(r)){M(!0);return}et(r),y(!0),es()}else M(!0)},[e,K]),ee=(0,a.useCallback)(()=>{s&&Y(s)},[s,Y]),et=(0,a.useCallback)(e=>{let s=[],r=[];for(let t=0;t<22;t++){let a=e[t];t>=2&&a.every(e=>0!==e)?s.push(t):r.push([...a])}s.length>0&&(U(s.map(e=>e-2)),setTimeout(()=>{for(;r.length<22;)r.unshift(Array(10).fill(0));t(r),U([]);let e=k+100*s.length,a=E+s.length;C(e),P(a),S(t=>Math.max(t,e)),Math.floor(a/10)>R-1&&(T(e=>e+1),O(e=>Math.max(.8*e,50)))},500))},[k,E,R]),es=(0,a.useCallback)(()=>{c(e=>{let t={x:Math.floor(5)-1,y:0,tetromino:e[0]},s=[...e.slice(1),N()];return G(t.x,t.y,t.tetromino.shape)?M(!0):l(t),s})},[G]),er=()=>{z(!L)};(0,a.useEffect)(()=>{s||_||es()},[s,_,es]),(0,a.useEffect)(()=>{let e=null;return _||L||(e=setInterval(()=>{let{currentPiece:e,board:t,gameOver:s,isPaused:r}=B.current;!s&&!r&&e&&(G(e.x,e.y+1,e.tetromino.shape,t)?Y(e):l(e=>e?{...e,y:e.y+1}:null))},H)),()=>{e&&clearInterval(e)}},[_,L,H,G,Y]),(0,a.useEffect)(()=>{let e=e=>{if(!_)switch(e.key){case"ArrowLeft":X();break;case"ArrowRight":Z();break;case"ArrowDown":$();break;case"ArrowUp":q();break;case" ":e.preventDefault(),W();break;case"p":case"P":er();break;case"h":case"H":Q()}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[X,Z,$,q,_,Q]),(0,a.useEffect)(()=>{V.current&&(V.current.volume=.3,V.current.loop=!0,_||!D||L?V.current.pause():V.current.play().catch(e=>console.error("Audio playback failed:",e)))},[_,D,L]);let ea=(t,r)=>{let a=r+2;return s&&s.tetromino.shape[a-s.y]&&s.tetromino.shape[a-s.y][t-s.x]?s.tetromino.color:e[a][t]},el=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;return e?(0,r.jsx)("div",{className:"grid gap-0.5",style:{gridTemplateColumns:"repeat(".concat(e.shape[0].length,", 1fr)")},children:e.shape.map((s,a)=>s.map((s,l)=>(0,r.jsx)("div",{className:"".concat(s?"bg-".concat(e.color):"bg-transparent"),style:{width:t,height:t}},"".concat(a,"-").concat(l))))}):null};return(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-gray-200 ".concat(b().className),children:[(0,r.jsx)("div",{className:"mb-8",children:(0,r.jsx)(v.default,{src:"/tetris-logo.png",alt:"Tetris Logo",width:300,height:80,priority:!0,className:"drop-shadow-lg"})}),(0,r.jsxs)("div",{className:"flex gap-8 items-start",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,r.jsxs)("div",{className:"bg-white p-3 rounded-lg shadow-lg",children:[(0,r.jsx)("h3",{className:"text-lg font-bold mb-2 text-center",children:"Hold"}),(0,r.jsx)("div",{className:"w-20 h-16 rounded flex items-center justify-center bg-slate-200",children:el(i,15)})]}),(0,r.jsx)("div",{className:"bg-white p-3 rounded-lg shadow-lg",children:(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-bold",children:"Highscore"}),(0,r.jsx)("div",{className:"p-1 rounded text-center bg-slate-200 text-black",children:A})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-bold",children:"Level"}),(0,r.jsx)("div",{className:"p-1 rounded text-center bg-slate-200 text-black",children:R})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-bold",children:"Score"}),(0,r.jsx)("div",{className:"p-1 rounded text-center bg-slate-200 text-black",children:k})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-bold",children:"Lines"}),(0,r.jsx)("div",{className:"p-1 rounded text-center bg-slate-200 text-black",children:E})]})]})})]}),(0,r.jsxs)("div",{className:"flex flex-col items-center",children:[(0,r.jsx)("div",{className:"bg-white p-4 rounded-lg shadow-lg",children:(0,r.jsx)("div",{className:"grid bg-gray-300",style:{gridTemplateColumns:"repeat(".concat(10,", 1fr)"),width:"".concat(250,"px"),height:"".concat(500,"px"),border:"1px solid #e5e7eb"},children:Array.from({length:20},(e,t)=>Array.from({length:10},(e,s)=>(0,r.jsx)(h.N,{children:(0,r.jsx)(x.P.div,{initial:!1,animate:{opacity:+!F.includes(t),scale:F.includes(t)?1.1:1},transition:{duration:.3},className:"w-6 h-6 ".concat(ea(s,t)?"bg-".concat(ea(s,t)):"bg-gray-100"),style:{border:"1px solid #e5e7eb"}})},"".concat(t,"-").concat(s))))})}),(0,r.jsxs)("div",{className:"h-12 flex items-center justify-center mt-4",children:[_&&(0,r.jsx)("div",{className:"text-2xl font-bold text-red-600",children:"Game Over!"}),L&&!_&&(0,r.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:"Paused"})]})]}),(0,r.jsx)("div",{className:"flex flex-col gap-4",children:(0,r.jsxs)("div",{className:"bg-white p-3 rounded-lg shadow-lg",children:[(0,r.jsx)("h3",{className:"text-lg font-bold mb-2 text-center",children:"Next"}),(0,r.jsx)("div",{className:"space-y-3",children:n.slice(0,3).map((e,t)=>(0,r.jsx)("div",{className:"w-20 h-16 rounded flex items-center justify-center bg-slate-200",children:el(e,15)},t))})]})})]}),(0,r.jsxs)("div",{className:"fixed bottom-4 left-4 right-4 flex justify-between items-end",children:[(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-lg",children:[(0,r.jsx)("h3",{className:"text-lg font-bold mb-3 text-center text-gray-800",children:"Controls"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-x-6 gap-y-2 text-sm",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"bg-gray-100 px-2 py-1 rounded text-xs font-mono min-w-[60px] flex items-center justify-center",children:(0,r.jsx)(v.default,{src:"/arrow-keys.png",alt:"Arrow Keys",width:40,height:30,className:"object-contain"})}),(0,r.jsx)("span",{className:"text-gray-700",children:"Move/Rotate"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"bg-gray-100 px-2 py-1 rounded text-xs font-mono min-w-[60px] text-center",children:"SPACE"}),(0,r.jsx)("span",{className:"text-gray-700",children:"Hard drop"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"bg-gray-100 px-2 py-1 rounded text-xs font-mono min-w-[60px] text-center",children:"H"}),(0,r.jsx)("span",{className:"text-gray-700",children:"Hold piece"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"bg-gray-100 px-2 py-1 rounded text-xs font-mono min-w-[60px] text-center",children:"P"}),(0,r.jsx)("span",{className:"text-gray-700",children:"Pause"})]})]})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(d,{onClick:er,size:"sm",className:"bg-gray-800 hover:bg-gray-700",children:L?(0,r.jsx)(u.A,{className:"w-4 h-4"}):(0,r.jsx)(m.A,{className:"w-4 h-4"})}),(0,r.jsx)(d,{onClick:()=>{I(!D)},size:"sm",className:"bg-gray-800 hover:bg-gray-700",children:D?(0,r.jsx)(g.A,{className:"w-4 h-4"}):(0,r.jsx)(f.A,{className:"w-4 h-4"})}),(0,r.jsx)(d,{onClick:()=>{t(j()),l(null),c(w()),o(null),y(!0),C(0),P(0),M(!1),z(!1),O(800),T(1),U([])},size:"sm",className:"bg-gray-800 hover:bg-gray-700",children:_?"Play Again":"Reset"})]})]}),(0,r.jsx)("audio",{ref:V,src:"https://hebbkx1anhila5yf.public.blob.vercel-storage.com/Tetris-kxnh5j7hpNEcFspAndlU2huV5n6dvk.mp3"})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[647,466,441,684,358],()=>t(2752)),_N_E=e.O()}]);